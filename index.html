<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>טופס קורות חיים</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #e83e8c;
      --primary-light: #ff6bb4;
      --secondary-color: #d63384;
      --text-color: #333;
      --light-gray: #fef8fb;
      --border-radius: 10px;
      --box-shadow: 0 8px 20px rgba(232, 62, 140, 0.12);
      --transition: all 0.3s ease;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', 'Heebo', Arial, sans-serif;
      background: linear-gradient(135deg, #fff0f7 0%, #ffd1e8 100%);
      color: var(--text-color);
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 30px 15px;
      line-height: 1.6;
    }
    
    .container {
      background-color: #ffffff;
      border-radius: var(--border-radius);
      box-shadow: 0 10px 30px rgba(232, 62, 140, 0.15);
      width: 95%;
      max-width: 800px;
      margin: 20px auto;
      overflow: hidden;
      border: 1px solid rgba(232, 62, 140, 0.1);
    }
    
    .header {
      background: linear-gradient(135deg, #ff86c6, #e83e8c);
      color: white;
      padding: 30px;
      text-align: center;
      position: relative;
    }
    
    .header h1 {
      margin: 0;
      font-size: 28px;
      font-weight: 600;
    }
    
    .header p {
      margin-top: 10px;
      opacity: 0.9;
      font-size: 16px;
    }
    
    .header svg {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 35px;
    }
    
    .form-container {
      padding: 35px;
    }
    
    .form-group {
      margin-bottom: 25px;
      position: relative;
    }
    
    .form-icon {
      position: absolute;
      right: 15px;
      top: 48px;
      color: var(--primary-color);
      font-size: 18px;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #555;
      font-size: 16px;
    }
    
    textarea,
    input[type="text"],
    input[type="email"] {
      width: 100%;
      padding: 12px 18px 12px 12px;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      font-size: 16px;
      transition: var(--transition);
      background-color: var(--light-gray);
    }
    
    textarea {
      min-height: 80px;
      resize: vertical;
    }
    
    textarea:focus,
    input[type="text"]:focus,
    input[type="email"]:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(232, 62, 140, 0.15);
    }
    
    .progress-container {
      margin: 30px 0;
    }
    
    .progress-bar {
      height: 8px;
      background-color: #e9ecef;
      border-radius: 10px;
      overflow: hidden;
    }
    
    .progress {
      height: 100%;
      background: linear-gradient(to right, #e83e8c, #ff9ed2);
      width: 0%;
      transition: width 0.3s ease;
    }
    
    .progress-text {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 14px;
      color: #666;
    }
    
    .btn {
      width: 100%;
      padding: 14px;
      background: linear-gradient(to right, #e83e8c, #ff86c6);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      font-size: 17px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      margin-top: 10px;
      position: relative;
      overflow: hidden;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);
    }
    
    .btn:active {
      transform: translateY(1px);
    }
    
    .btn-ripple {
      position: absolute;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      transform: scale(0);
      animation: ripple 0.6s linear;
    }
    
    @keyframes ripple {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }
    
    #result {
      margin-top: 40px;
      padding: 25px;
      background-color: #fff;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      display: none;
    }
    
    .result-visible {
      display: block !important;
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .form-tip {
      background-color: rgba(232, 62, 140, 0.08);
      padding: 12px 15px;
      border-radius: var(--border-radius);
      border-right: 3px solid var(--primary-color);
      margin-top: 6px;
      font-size: 14px;
      color: #555;
    }
    
    .loader {
      display: none;
      text-align: center;
      padding: 20px;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      margin: 0 auto;
      border: 4px solid rgba(232, 62, 140, 0.15);
      border-left-color: #e83e8c;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    @media (max-width: 768px) {
      .form-container {
        padding: 25px 20px;
      }
    }
    
    .character-count {
      text-align: left;
      font-size: 12px;
      color: #666;
      margin-top: 5px;
    }
    
    .required::after {
      content: " *";
      color: #e74c3c;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>✨ בניית קורות חיים מקצועיים ✨</h1>
      <p>מלא/י את הפרטים ונכין לך קורות חיים מרשימים ומעוצבים</p>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
        <path fill="#ffffff" fill-opacity="1" d="M0,160L48,144C96,128,192,96,288,106.7C384,117,480,171,576,176C672,181,768,139,864,128C960,117,1056,139,1152,149.3C1248,160,1344,160,1392,160L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
      </svg>
    </div>
    
    <div class="form-container">
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress" id="formProgress"></div>
        </div>
        <div class="progress-text">
          <span>השלמת הטופס: <span id="progressPercent">0%</span></span>
          <span id="fieldsCompleted">0/5 שדות</span>
        </div>
      </div>
      
      <form id="cvForm">
        <div class="form-group">
          <label class="required">פרטים אישיים</label>
          <i class="fa-solid fa-user form-icon"></i>
          <textarea name="personal_info" id="personal_info" rows="2" placeholder="שם מלא, טלפון, אימייל, עיר מגורים" required></textarea>
          <div class="form-tip">
            <i class="fa-solid fa-lightbulb"></i>
            טיפ: סדר את הפרטים בצורה ברורה עם פסיקים או שורות נפרדות
          </div>
          <div class="character-count" id="personal_info_count">0/200</div>
        </div>

        <div class="form-group">
          <label class="required">תפקיד מבוקש</label>
          <i class="fa-solid fa-briefcase form-icon"></i>
          <input type="text" name="job_target" id="job_target" placeholder="מה התפקיד או התחום שאת/ה מחפש/ת?" required>
          <div class="character-count" id="job_target_count">0/100</div>
        </div>

        <div class="form-group">
          <label class="required">ניסיון תעסוקתי</label>
          <i class="fa-solid fa-business-time form-icon"></i>
          <textarea name="work_experience" id="work_experience" rows="4" placeholder="פרט/י את הניסיון התעסוקתי המשמעותי שלך (חברה, תפקיד, שנים, הישגים)" required></textarea>
          <div class="form-tip">
            <i class="fa-solid fa-lightbulb"></i>
            טיפ: ציין/י תפקידים, שנים, ואחריות מרכזית בכל תפקיד
          </div>
          <div class="character-count" id="work_experience_count">0/400</div>
        </div>

        <div class="form-group">
          <label class="required">השכלה</label>
          <i class="fa-solid fa-graduation-cap form-icon"></i>
          <textarea name="education" id="education" rows="3" placeholder="מוסד לימודים, תחום, תעודה/תואר, שנים" required></textarea>
          <div class="character-count" id="education_count">0/300</div>
        </div>

        <div class="form-group">
          <label class="required">כישורים וידע מקצועי</label>
          <i class="fa-solid fa-star form-icon"></i>
          <textarea name="skills" id="skills" rows="3" placeholder="כישורים מקצועיים, שפות, תוכנות, יכולות רלוונטיות" required></textarea>
          <div class="form-tip">
            <i class="fa-solid fa-lightbulb"></i>
            טיפ: התמקד/י בכישורים הרלוונטיים לתפקיד המבוקש
          </div>
          <div class="character-count" id="skills_count">0/300</div>
        </div>

        <button type="submit" class="btn" id="submitBtn">
          <span>יצירת קורות חיים</span>
          <i class="fa-solid fa-paper-plane" style="margin-right: 8px;"></i>
        </button>
      </form>

      <div class="loader" id="loader">
        <div class="spinner"></div>
        <p style="margin-top: 15px;">מעבד את המידע...</p>
      </div>

      <div id="result"></div>
    </div>
  </div>

  <script>
    // Character counter
    function updateCharCount(field, counterId, maxChars) {
      const counter = document.getElementById(counterId);
      const currentLength = field.value.length;
      counter.textContent = `${currentLength}/${maxChars}`;
      
      if (currentLength > maxChars * 0.8) {
        counter.style.color = currentLength > maxChars ? '#e74c3c' : '#f39c12';
      } else {
        counter.style.color = '#666';
      }
    }
    
    // Setup character counters
    const charCounters = [
      {field: 'personal_info', counter: 'personal_info_count', max: 200},
      {field: 'job_target', counter: 'job_target_count', max: 100},
      {field: 'work_experience', counter: 'work_experience_count', max: 400},
      {field: 'education', counter: 'education_count', max: 300},
      {field: 'skills', counter: 'skills_count', max: 300}
    ];
    
    charCounters.forEach(item => {
      const field = document.getElementById(item.field);
      field.addEventListener('input', () => updateCharCount(field, item.counter, item.max));
      updateCharCount(field, item.counter, item.max);
    });
    
    // Update progress bar
    function updateProgress() {
      const totalFields = 5;
      let filledFields = 0;
      
      ['personal_info', 'job_target', 'work_experience', 'education', 'skills'].forEach(fieldId => {
        if (document.getElementById(fieldId).value.trim() !== '') {
          filledFields++;
        }
      });
      
      const progressPercent = Math.floor((filledFields / totalFields) * 100);
      document.getElementById('formProgress').style.width = `${progressPercent}%`;
      document.getElementById('progressPercent').textContent = `${progressPercent}%`;
      document.getElementById('fieldsCompleted').textContent = `${filledFields}/${totalFields} שדות`;
    }
    
    // Add input event listeners for all fields
    document.querySelectorAll('input, textarea').forEach(element => {
      element.addEventListener('input', updateProgress);
    });
    
    // Button ripple effect
    document.getElementById('submitBtn').addEventListener('click', function(e) {
      const button = e.currentTarget;
      const circle = document.createElement('span');
      const diameter = Math.max(button.clientWidth, button.clientHeight);
      
      circle.style.width = circle.style.height = `${diameter}px`;
      circle.style.left = `${e.clientX - button.offsetLeft - diameter/2}px`;
      circle.style.top = `${e.clientY - button.offsetTop - diameter/2}px`;
      circle.classList.add('btn-ripple');
      
      button.appendChild(circle);
      setTimeout(() => circle.remove(), 600);
    });
    
    // Form submission
    const form = document.getElementById("cvForm");
    const loader = document.getElementById("loader");
    const resultDiv = document.getElementById("result");
    
    form.addEventListener("submit", async function (e) {
      e.preventDefault();
      
      // Show loader, hide button
      loader.style.display = "block";
      document.getElementById("submitBtn").style.display = "none";
      
      const formData = new FormData(form);
      const data = {};
      formData.forEach((value, key) => {
        data[key] = value;
      });
      
      try {
        const response = await fetch("https://hook.eu2.make.com/14go3a6ftulk26o7uupboia7kng2x4f8", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });
        
        const html = await response.text();
        
        // Hide loader, show result
        loader.style.display = "none";
        resultDiv.innerHTML = html;
        resultDiv.style.display = "block";
        resultDiv.classList.add("result-visible");
        
        // Scroll to result with smooth animation
        resultDiv.scrollIntoView({ behavior: "smooth", block: "start" });
        
      } catch (error) {
        console.error("שגיאה:", error);
        loader.style.display = "none";
        document.getElementById("submitBtn").style.display = "block";
        resultDiv.innerHTML = `
          <div style="color: #e74c3c; text-align: center; padding: 20px;">
            <i class="fa-solid fa-circle-exclamation" style="font-size: 40px; margin-bottom: 15px;"></i>
            <h3>אירעה שגיאה בעת שליחת הטופס</h3>
            <p>אנא נסה/י שוב מאוחר יותר או צור/י קשר עם התמיכה.</p>
          </div>
        `;
        resultDiv.style.display = "block";
      }
    });
    
    // Initialize progress
    updateProgress();
  </script>
</body>
</html>